<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>選手交代記録アプリ</title>
    <style>
        /* Styles omitted for brevity, unchanged from original code */
    </style>
</head>
<body>
    <div class="container">
        <div class="list" id="playerList">
            <div class="area-title">登録選手</div>
        </div>
        <div class="area" id="bench">
            <div class="area-title">控え</div>
        </div>
        <div class="area" id="field">
            <div class="area-title">出場</div>
        </div>
        <div class="area" id="tempOut">
            <div class="area-title">一時退出</div>
        </div>
        <div class="area" id="inArea">
            <div class="area-title">INエリア</div>
        </div>
        <div class="area" id="outArea">
            <div class="area-title">OUTエリア</div>
        </div>
    </div>
    <div class="input-container">
        <input type="text" id="playerNamesInput" class="input-box" placeholder="選手名をカンマ区切りで入力">
        <button id="registerButton" class="register-btn">登録</button>
    </div>
    <div class="history" id="history">
        <strong>移動履歴:</strong>
        <ul id="history-list"></ul>
    </div>

    <script>
        const bench = document.getElementById("bench");
        const field = document.getElementById("field");
        const tempOut = document.getElementById("tempOut");
        const inArea = document.getElementById("inArea");
        const outArea = document.getElementById("outArea");
        const historyList = document.getElementById("history-list");

        // ボタンの理由リスト
        const reasons = ["理由A", "理由B", "理由C"];

        // 選手要素を作成
        function createPlayerElement(name) {
            const player = document.createElement("div");
            player.className = "player";
            player.textContent = name;
            player.dataset.name = name;

            const buttons = document.createElement("div");
            buttons.style.display = "flex";

            reasons.forEach(reason => {
                const button = document.createElement("button");
                button.textContent = reason;
                button.addEventListener("click", () => handleSubstitution(name, reason));
                buttons.appendChild(button);
            });

            player.appendChild(buttons);
            return player;
        }

        // 選手交代処理
        function handleSubstitution(playerName, reason) {
            const outPlayer = outArea.querySelector(`[data-name="${playerName}"]`);
            const inPlayer = inArea.querySelector(`[data-name="${playerName}"]`);

            if (outPlayer && inPlayer) {
                recordHistory(reason, outPlayer.dataset.name, inPlayer.dataset.name);
                outArea.removeChild(outPlayer);
                inArea.removeChild(inPlayer);
                field.appendChild(createPlayerElement(inPlayer.dataset.name));
            }
        }

        // 履歴記録
        function recordHistory(reason, outPlayer, inPlayer) {
            const listItem = document.createElement("li");
            listItem.textContent = `理由${reason}で ${outPlayer} が退出し、${inPlayer} が出場しました`;
            historyList.appendChild(listItem);
        }

        // 初期化処理など（省略、基本的にドラッグ＆ドロップイベントなど既存コードに準拠）
    </script>
</body>
</html>
