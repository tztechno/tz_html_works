### リダイレクト対応

リダイレクト先のURLを取得するために、fetchを使って実際のURLを確認する機能を追加

```

主な変更点は以下の通りです：

1. `getFinalUrl()`関数の追加
   - fetchのHEADメソッドを使用してリダイレクト先のURLを取得
   - エラー処理を含み、失敗した場合は元のURLを返す

2. `extractUrls()`の非同期化
   - async/awaitを使用してリダイレクト解決を実装
   - ハイパーリンクとテキストURLの両方でリダイレクトチェックを実行

3. `generateHtml()`の非同期化
   - extractUrls()が非同期になったため、これも非同期関数に変更

注意点：
- CORSポリシーにより、一部のURLではリダイレクトの確認ができない場合があります
- そのような場合は元のURLが使用されます
- セキュリティ上の理由で、一部のサーバーではHEADリクエストを許可していない場合があります

このコードを使用する際は、以下のような点に注意してください：
1. すべての関数呼び出しで`await`キーワードを使用する
2. イベントハンドラーでも非同期処理を適切に扱う
3. エラーハンドリングを必要に応じて追加する

```

```
はい、その通りです。例えば:

1. 元のURL: `https://t.co/abc123` (Twitterの短縮URL)
2. リダイレクト後: `https://example.com/actual-page` (実際のページURL)

この場合、抽出結果には`https://example.com/actual-page`が表示されます。

これには以下のようなメリットがあります：
- 実際の最終的なURLがわかるため、同じページへの異なる短縮URLが重複として除外される
- セキュリティ面で、リダイレクト先を事前に確認できる
- 保存されるHTMLファイルに最終的なURLが含まれるため、より永続的なリンクとなる

ただし、先ほど触れたように、以下の制限があります：
- CORSポリシーによる制限
- サーバーがHEADリクエストを許可していない場合
- リダイレクトチェーンが長い場合の処理時間

これらの場合は、元のURLがそのまま使用されます。
実装をカスタマイズして、リダイレクトの解決に失敗した場合は元のURLと最終URLの両方を表示するようにすることも可能です。そのような変更が必要でしょうか？

```
